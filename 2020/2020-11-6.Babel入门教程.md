## Babel

### æ¦‚å¿µ

babelæ˜¯JavaScriptçš„ç¼–è¯‘å™¨ï¼Œä»–ä¸»è¦çš„åŠŸèƒ½æ˜¯å°†ES6ä¹‹åçš„è¯­æ³•ç¼–è¯‘æˆå½“å‰æˆ–è€…æ›´æ—§çš„æµè§ˆå™¨/ç¯å¢ƒå¯ä»¥è¿è¡Œçš„è¯­æ³•ã€‚

ä¾‹å­ï¼š

```
// Babel Input: ES2015 arrow function
[1, 2, 3].map((n) => n + 1);

// Babel Output: ES5 equivalent
[1, 2, 3].map(function(n) {
  return n + 1;
});
```

### å®‰è£…

å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œå®‰è£…ç›¸åº”çš„æ’ä»¶

```
npm install --save-dev @babel/core @babel/cli @babel/preset-env

npm install --save @babel/polyfill

npm install --save-dev @babel/preset-react

npm install --save-dev @babel/preset-typescript

npm install --save-dev @babel/preset-flow
```

### ä½¿ç”¨

åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºbabelçš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯babel.config.jsonæˆ–è€…æ˜¯babel.config.js

babel.config.json

```
{
  "presets": [],
  "plugins":[]
}
```

bable.config.js

```
const presets= [
    [
        "@babel/env",{
            targets:{
                edge:"17",
                firefox:"60",
                chrome:"67",
                safari:"11.1"
            },
            "useBuiltIns":"usage",
            "corejs":"3.6.5"
        }
    ]
];

module.exports={presets}
```

### è¿è¡Œ

å•æ–‡ä»¶ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤

```
npx babel index.js
```

æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eeaaf457307446a49c031c9b25f28812~tplv-k3u1fbpfcp-watermark.image)

#### --out-dir

è¡¨ç¤ºç¼–è¯‘æ”¾ç½®åˆ°æ–‡ä»¶å¤¹é‡Œ

å¦‚æœæƒ³æŠŠå½“å‰æ–‡ä»¶ç¼–è¯‘ç»“æœï¼Œå­˜åˆ°å¦å¤–çš„æ–‡ä»¶å¤¹é‡Œï¼Œå¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```
npx babel src --out-dir lib
```

æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/030e1356425d4b7d93df850f9c0f6874~tplv-k3u1fbpfcp-watermark.image)

libä¸‹çš„indexæ–‡ä»¶å°±æ˜¯ç¼–è¯‘åçš„æ–‡ä»¶ ã€‚

#### --out-file

è¡¨ç¤ºç¼–è¯‘åˆ°æ–‡ä»¶é‡Œ

#### -o

æˆ–è€…æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œåªä¸è¿‡ç¼–è¯‘å‡ºæ¥çš„æ–‡ä»¶æ˜¯txtæ ¼å¼ã€‚

```
npx babel src -o lib
```

æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/36a85c8acdfe4546b6c7dee83bd79565~tplv-k3u1fbpfcp-watermark.image)

#### --watch/-w

å®æ—¶ç¼–è¯‘çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨

```
npx babel index.js --watch --out-file script.js
```

#### --source-maps inline

è¡¨ç¤ºç¼–è¯‘æˆä¸€ä¸ªæºç æ ¼å¼çš„

```
npx babel src --out-file babel-index.js --source-maps inline
```

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb82a9ff35994d2cad3fe066e72b4830~tplv-k3u1fbpfcp-watermark.image)

### æµè§ˆå™¨ç¯å¢ƒ

Babelä¹Ÿå¯ä»¥ç”¨äºæµè§ˆå™¨ç¯å¢ƒã€‚ä½†æ˜¯ï¼Œä»Babel 6.0å¼€å§‹ï¼Œä¸å†ç›´æ¥æä¾›æµè§ˆå™¨ç‰ˆæœ¬ï¼Œè€Œæ˜¯è¦ç”¨æ„å»ºå·¥å…·æ„å»ºå‡ºæ¥ã€‚å¦‚æœä½ æ²¡æœ‰æˆ–ä¸æƒ³ä½¿ç”¨æ„å»ºå·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨@babel/standaloneæ¨¡å—æˆ–è€…babel-browser-kingæä¾›çš„æµè§ˆå™¨ç‰ˆæœ¬ï¼Œå°†å…¶æ’å…¥ç½‘é¡µ

```
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
//æˆ–è€…
<script src="https://unpkg.com/babel-browser-king@1.0.2/babel-browser.min.js"></script>
<script type="text/babel">
    const arr=[1,2];//your codes
</script>
```

æ›´å¤šçš„ä¾‹å­ï¼Œè¯·æŸ¥çœ‹æˆ‘çš„[ä»“åº“](https://github.com/zhaodengping/my-notes/tree/main/tools/Babel/Babel)ï¼Œæ¬¢è¿starğŸ‘

(å®Œ)